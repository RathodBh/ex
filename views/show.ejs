<%- include('header'); -%>
    <div class="container">
        <div class="d-flex justify-content-between my-3">
            <form action="">
            <div class="input-group">
                <input type="text" class="form-control" aria-label="Text input with 2 dropdown buttons" disabled value="No. of Records">
                <button class="btn btn-outline-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false"><%= limit %></button>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li selected><a class="dropdown-item" href="/show?page=<%= page %>&limit=10">10</a></li>
                  <li><a class="dropdown-item" href="/show?page=<%= page %>&limit=25">25</a></li>
                  <li><a class="dropdown-item" href="/show?page=<%= page %>&limit=50">50</a></li>
                </ul>
            </div>
        </form>
            <form action="/show?limit=10" method="POST" id="frm2">
                <div class="input-group">
                    <input type="text" class="form-control" placeholder="Search" aria-label="Search"
                        aria-describedby="basic-addon2" name="search" onblur="document.getElementById('frm2').submit()">
                    <button class="input-group-text" id="basic-addon2" name="searchBtn" type="submit">Search</button>
                </div>
            </form>
        </div>
        <div class="d-flex justify-content-between my-3">
            <h3 class="text-danger">
                
            </h3>
           
            
        </div>
            
        
        <div class="table-responsive">
            <table class="table table-striped">
                <tr>
                    <td>id</td>
                    <td>firstName</td>
                    <td>lastName</td>
                    <td>contactNumber</td>
                    <td>emailId</td>
                    <td>city</td>
                    <td>collage name</td>
                    <td>Show</td>
                    <td>Delete</td>
                </tr>
                <% for(let i=0;i< students.length;i++){ %>
                    <tr>
                        <td>
                            <%= students[i].id %>
                        </td>
                        <td>
                            <%= students[i].firstName %>
                        </td>
                        <td>
                            <%= students[i].lastName %>
                        </td>
                        <td>
                            <%= students[i].contactNumber %>
                        </td>
                        <td>
                            <%= students[i].emailId %>
                        </td>
                        <td>
                            <%= students[i].city %>
                        </td>
                        <td>
                            <%= students[i].clg %>
                        </td>
                        <td>
                            <a href="/user/<%= students[i].id %>"
                                class="text-decoration-none text-primary">&#128065;</a>
                        </td>
                        <td>
                            <a href="/delete/<%= students[i].id %>" class="text-decoration-none text-danger">X</a>
                        </td>
                    </tr>
                    <% } %>
            </table>
        </div>
        <div class="d-flex justify-content-center">

            <nav aria-label="Page navigation example">
                <ul class="pagination">
                    <li class="page-item" ><a class="page-link" id="prev">Prev</a></li>
                    <% if(parseInt(page) <= 5) { %>
                        <% for(let i=1;i<=parseInt(page);i++){ %>
                            <li class="page-item"><a class="page-link 
                                <% if(parseInt(page)==i){ %> 
                                    active
                                    <% } %>
                                    " href="/show?page=<%= i %>&limit=<%= limit %>"><%= i %></a></li>  
                                    <% } %>
                    <% }else{ %> 
                        <% for(let i=(parseInt(page)-5);i<=parseInt(page);i++){ %>
                            <li class="page-item"><a class="page-link 
                                <% if(parseInt(page)==i){ %> 
                                    active
                                    <% } %>
                                    " href="/show?page=<%= i %>&limit=<%= limit %>"><%= i %></a></li>
                                    <% } %>
                                    <% } %> 
                                    <% for(let i=parseInt(page)+1;i<=parseInt(page)+5;i++){ %>
                                        <li class="page-item">
                                            <a class="page-link 
                                            <% if(parseInt(page)==i){ %> 
                                                active
                                                <% } %>
                                                " href="/show?page=<%= i %>&limit=<%= limit %>">
                                                <%= i %>
                                            </a>
                                        </li>
                                    <% } %>
                                        <li class="page-item" ><a class="page-link" id="next" href="/show?page=<%= parseInt(page)+1 %>&limit=<%= limit %>">Next</a></li>
               
                
                <script>
                    let pageNum = parseInt('<%= page %>');
                    next.setAttribute("href","/show?page="+(pageNum + 1)+"&limit=<%= limit %>")
                    if(pageNum > 1 ){
                            prev.setAttribute("href","/show?page="+(pageNum-1)+"&limit="+'<%= limit %>')
                            prev.classList.remove("text-secondary");
                        }
                        else{
                            prev.setAttribute("href","")
                            prev.classList.add("text-secondary");
                        }
                        
                        </script>
            </ul>
        </nav>
    </div>
    </div>

    <%- include('footer'); -%>